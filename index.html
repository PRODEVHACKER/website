<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebAssembly Calculator</title>
</head>
<body>
    <h1>WebAssembly Calculator</h1>
    <button id="startCalculator">Start Calculator in WebAssembly</button>
    <div id="result"></div>

    <script>
    let wasmModule = null;
    let wasmMemory = null;

    // Load WebAssembly module
    async function loadWasmModule() {
        try {
            // Simple WebAssembly module that does math (you can customize this later)
            const wasmCode = `
                (module
                  (memory (export "memory") 1)
                  (func (export "add") (param i32 i32) (result i32)
                    local.get 0
                    local.get 1
                    i32.add)
                  (func (export "subtract") (param i32 i32) (result i32)
                    local.get 0
                    local.get 1
                    i32.sub)
                  (func (export "multiply") (param i32 i32) (result i32)
                    local.get 0
                    local.get 1
                    i32.mul)
                  (func (export "divide") (param i32 i32) (result i32)
                    local.get 0
                    local.get 1
                    i32.div_s)
                )
            `;

            const wasmBuffer = new TextEncoder().encode(wasmCode);
            const module = await WebAssembly.compile(wasmBuffer);
            const instance = await WebAssembly.instantiate(module);

            wasmModule = instance;
            wasmMemory = instance.exports.memory;
            console.log("WebAssembly Calculator Module Loaded.");
        } catch (error) {
            console.error("Error loading WebAssembly module:", error);
        }
    }

    // Function to simulate running the calculator
    function runCalculator() {
        if (wasmModule) {
            try {
                // Example of simple operations in WebAssembly
                const num1 = 12;
                const num2 = 8;

                const addResult = wasmModule.exports.add(num1, num2);
                const subtractResult = wasmModule.exports.subtract(num1, num2);
                const multiplyResult = wasmModule.exports.multiply(num1, num2);
                const divideResult = wasmModule.exports.divide(num1, num2);

                document.getElementById("result").innerHTML = `
                    Add: ${addResult}<br>
                    Subtract: ${subtractResult}<br>
                    Multiply: ${multiplyResult}<br>
                    Divide: ${divideResult}
                `;
                console.log("Calculator results:", addResult, subtractResult, multiplyResult, divideResult);
            } catch (error) {
                console.error("Error running calculator:", error);
            }
        }
    }

    // Event listener to start calculator after pressing the button
    document.getElementById('startCalculator').addEventListener('click', async () => {
        await loadWasmModule();
        runCalculator();
    });
    </script>
</body>
</html>
